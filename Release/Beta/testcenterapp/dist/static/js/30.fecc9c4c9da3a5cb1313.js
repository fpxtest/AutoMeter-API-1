webpackJsonp([30],{"R2i/":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("Dd8w"),o=n.n(i),r=n("vLgD");function s(t){return Object(r.a)({url:"/testcondition/report/search",method:"post",data:t})}var a=n("0xDb"),c=n("NYxO"),l={filters:{statusFilter:function(t){return{published:"success",draft:"gray",deleted:"danger"}[t]}},data:function(){return{itemKey:null,tmpplanname:"",tmpbatchname:"",testconditionreportList:[],listLoading:!1,total:0,dialogStatus:"add",dialogFormVisible:!1,textMap:{updateRole:"修改环境",update:"修改环境",add:"添加环境"},btnLoading:!1,tmptestconditionreport:{id:"",planname:"",batchname:"",conditionname:"",conditiontype:"",subconditiontype:"",subconditionname:"",conditionresult:"",conditionstatus:"",runtime:""},search:{page:1,size:10,planname:null,batchname:null}}},created:function(){this.gettestconditionreportList()},computed:o()({},Object(c.b)(["name","sidebar","avatar"])),methods:{unix2CurrentTime:a.b,gettestconditionreportList:function(){var t=this;this.listLoading=!0,this.search.planname=this.tmpplanname,this.search.batchname=this.tmpbatchname,s(this.search).then(function(e){t.testconditionreportList=e.data.list,t.total=e.data.total,t.listLoading=!1}).catch(function(e){t.$message.error("加载条件结果失败")})},searchBy:function(){var t=this;this.search.page=1,this.listLoading=!0,s(this.search).then(function(e){t.itemKey=Math.random(),t.testconditionreportList=e.data.list,t.total=e.data.total}).catch(function(e){t.$message.error("搜索失败")}),this.tmpplanname=this.search.planname,this.tmpbatchname=this.search.batchname,this.listLoading=!1,this.btnLoading=!1},handleSizeChange:function(t){this.search.page=1,this.search.size=t,this.gettestconditionreportList()},handleCurrentChange:function(t){this.search.page=t,this.gettestconditionreportList()},getIndex:function(t){return(this.search.page-1)*this.search.size+t+1},showAddtestconditionreportDialog:function(){this.dialogFormVisible=!0,this.dialogStatus="add",this.tmptestconditionreport.id="",this.tmptestconditionreport.testconditionreportname="",this.tmptestconditionreport.variablesdes="",this.tmptestconditionreport.testconditionreporttype="",this.tmptestconditionreport.variablesexpress="",this.tmptestconditionreport.memo="",this.tmptestconditionreport.envtype="",this.tmptestconditionreport.creator=this.name},addtestconditionreport:function(){var t=this;this.$refs.tmptestconditionreport.validate(function(e){var n;e&&(t.btnLoading=!0,(n=t.tmptestconditionreport,Object(r.a)({url:"/testcondition/report",method:"post",data:n})).then(function(){t.$message.success("添加成功"),t.gettestconditionreportList(),t.dialogFormVisible=!1,t.btnLoading=!1}).catch(function(e){t.$message.error("添加失败"),t.btnLoading=!1}))})},showUpdatetestconditionreportDialog:function(t){this.dialogFormVisible=!0,this.dialogStatus="update",this.tmptestconditionreport.id=this.testconditionreportList[t].id,this.tmptestconditionreport.testconditionreportname=this.testconditionreportList[t].testconditionreportname,this.tmptestconditionreport.variablesdes=this.testconditionreportList[t].variablesdes,this.tmptestconditionreport.testconditionreporttype=this.testconditionreportList[t].testconditionreporttype,this.tmptestconditionreport.variablesexpress=this.testconditionreportList[t].variablesexpress,this.tmptestconditionreport.memo=this.testconditionreportList[t].memo,this.tmptestconditionreport.creator=this.name},updatetestconditionreport:function(){var t=this;this.$refs.tmptestconditionreport.validate(function(e){var n;e&&(n=t.tmptestconditionreport,Object(r.a)({url:"/testcondition/report/detail",method:"put",data:n})).then(function(){t.$message.success("更新成功"),t.gettestconditionreportList(),t.dialogFormVisible=!1}).catch(function(e){t.$message.error("更新失败")})})},removetestconditionreport:function(t){var e=this;this.$confirm("删除该变量？","警告",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then(function(){var n,i=e.testconditionreportList[t].id;(n=i,Object(r.a)({url:"/testcondition/report/"+n,method:"delete"})).then(function(){e.$message.success("删除成功"),e.gettestconditionreportList()})}).catch(function(){e.$message.info("已取消删除")})},isUniqueDetail:function(t){for(var e=0;e<this.testconditionreportList.length;e++)if(this.testconditionreportList[e].id!==t.id&&this.testconditionreportList[e].testconditionreportname===t.testconditionreportname)return this.$message.error("变量名已存在"),!1;return!0}}},d={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",[t.hasPermission("testconditionreport:list")?n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-refresh"},nativeOn:{click:function(e){return e.preventDefault(),t.gettestconditionreportList(e)}}},[t._v("刷新")]):t._e()],1),t._v(" "),t.hasPermission("testconditionreport:search")?n("span",[n("el-form-item",[n("el-input",{attrs:{clearable:"",maxlength:"40",placeholder:"集合/用例"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchBy(e)}},model:{value:t.search.planname,callback:function(e){t.$set(t.search,"planname",e)},expression:"search.planname"}})],1),t._v(" "),n("el-form-item",[n("el-input",{attrs:{clearable:"",maxlength:"40",placeholder:"执行计划"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchBy(e)}},model:{value:t.search.batchname,callback:function(e){t.$set(t.search,"batchname",e)},expression:"search.batchname"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:t.searchBy}},[t._v("查询")])],1)],1):t._e()],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],key:t.itemKey,attrs:{data:t.testconditionreportList,"element-loading-text":"loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{label:"编号",align:"center",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{domProps:{textContent:t._s(t.getIndex(e.$index))}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"集合/用例名",align:"center",prop:"planname",width:"150"}}),t._v(" "),n("el-table-column",{attrs:{label:"执行计划名",align:"center",prop:"batchname",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{label:"父条件名",align:"center",prop:"conditionname",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{label:"子条件名",align:"center",prop:"subconditionname",width:"180"}}),t._v(" "),n("el-table-column",{attrs:{label:"子条件类型",align:"center",prop:"subconditiontype",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{label:"条件结果",align:"center",prop:"conditionresult",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-popover",{attrs:{trigger:"hover",placement:"top"}},[n("p",[t._v(t._s(e.row.conditionresult))]),t._v(" "),n("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[n("el-tag",{attrs:{size:"medium"}},[t._v("...")])],1)])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"条件状态",align:"center",prop:"conditionstatus",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["失败"===e.row.conditionstatus?n("span",{staticStyle:{color:"red"}},[t._v(t._s(e.row.conditionstatus))]):n("span",{staticStyle:{color:"#37B328"}},[t._v(t._s(e.row.conditionstatus))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"消耗时长(ms)",align:"center",prop:"runtime",width:"100"}}),t._v(" "),n("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t.unix2CurrentTime(e.row.createTime)))]}}])})],1),t._v(" "),n("el-pagination",{attrs:{"current-page":t.search.page,"page-size":t.search.size,total:t.total,"page-sizes":[10,20,30,40],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},staticRenderFns:[]},p=n("VU/8")(l,d,!1,null,null,null);e.default=p.exports}});
//# sourceMappingURL=30.fecc9c4c9da3a5cb1313.js.map