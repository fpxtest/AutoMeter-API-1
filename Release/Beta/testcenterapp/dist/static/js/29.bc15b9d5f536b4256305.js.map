{"version":3,"sources":["webpack:///src/views/system/account/detail.vue","webpack:///./src/views/system/account/detail.vue?6c6d","webpack:///./src/views/system/account/detail.vue"],"names":["detail","created","this","setDetail","data","_this","loading","btnLoading","dialogFormVisible","toUpdate","tmpPassword","oldPassword","newPassword","newPassword2","updatePasswordRules","required","trigger","validator","rule","value","callback","length","Error","validateOldPassword","then","isValidate","isOldNewPasswordSame","isNewPasswordSame","tmpAccount","id","name","email","updateDetailRules","Object","validate","computed","extends_default","vuex_esm","account","state","methods","unix2CurrentTime","utils","accountId","password","api_account","response","resetToken","token","utils_token","regainAccountDetail","_this2","store","dispatch","updateAccount","_this3","$message","success","catch","res","error","updateDetail","_this4","$refs","valid","showUpdatePasswordDialog","updatePassword","_this5","account_detail","render","_vm","_h","$createElement","_c","_self","staticClass","directives","rawName","expression","modifiers","body","ref","attrs","model","rules","label-width","gutter","span","label","prop","$$v","$set","_v","_s","registerTime","loginTime","type","nativeOn","click","$event","preventDefault","title","visible","on","update:visible","staticStyle","width","margin-left","status-icon","label-position","prefix-icon","auto-complete","placeholder","slot","resetFields","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/29.bc15b9d5f536b4256305.js","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form\n      v-loading.body=\"loading\"\n      :model=\"tmpAccount\"\n      :rules=\"updateDetailRules\"\n      ref=\"tmpAccount\"\n      label-width=\"115px\"\n    >\n      <el-row :gutter=\"18\">\n        <el-col :span=\"9\">\n          <el-form-item label=\"账户名\" prop=\"name\">\n            <el-input v-if=\"toUpdate\" v-model=\"tmpAccount.name\" />\n            <span v-else>{{ tmpAccount.name }}</span>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"9\">\n          <el-form-item label=\"邮箱\" prop=\"email\">\n            <el-input v-if=\"toUpdate\" v-model=\"tmpAccount.email\" />\n            <span v-else>{{ tmpAccount.email }}</span>\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <el-row :gutter=\"18\">\n        <el-col :span=\"9\">\n          <el-form-item label=\"注册时间\"><span>{{ unix2CurrentTime(account.registerTime) }}</span></el-form-item>\n        </el-col>\n        <el-col :span=\"9\">\n          <el-form-item label=\"最后登录时间\"><span>{{ unix2CurrentTime(account.loginTime) }}</span></el-form-item>\n        </el-col>\n      </el-row>\n      <el-form-item>\n        <el-row :gutter=\"18\">\n          <el-col :span=\"6\">\n            <el-button type=\"success\" :loading=\"btnLoading\" @click.native.prevent=\"regainAccountDetail\">重新获取信息</el-button>\n          </el-col>\n\n          <el-col :span=\"6\" v-if=\"!toUpdate\">\n            <el-button type=\"primary\" :loading=\"btnLoading\" @click.native.prevent=\"toUpdate = !toUpdate\">修改信息</el-button>\n          </el-col>\n          <el-col :span=\"6\" v-else>\n            <el-button type=\"primary\" :loading=\"btnLoading\" @click.native.prevent=\"updateDetail\">确认修改</el-button>\n            <el-button type=\"warning\" @click.native.prevent=\"toUpdate = !toUpdate\">取消修改</el-button>\n          </el-col>\n          \n          <el-col :span=\"6\">\n            <el-button type=\"danger\" @click.native.prevent=\"showUpdatePasswordDialog\">修改密码</el-button>\n          </el-col>\n        </el-row>\n      </el-form-item>\n    </el-form>\n\n    <el-dialog title=\"修改密码\" :visible.sync=\"dialogFormVisible\">\n      <el-form\n        status-icon\n        class=\"small-space\"\n        label-position=\"left\"\n        label-width=\"115px\"\n        style=\"width: 400px; margin-left:50px;\"\n        :model=\"tmpPassword\"\n        :rules=\"updatePasswordRules\"\n        ref=\"tmpPassword\"\n      >\n        <el-form-item label=\"旧密码\" prop=\"oldPassword\" required>\n          <el-input\n            type=\"password\"\n            prefix-icon=\"el-icon-edit\"\n            auto-complete=\"off\"\n            placeholder=\"请输入旧密码\"\n            v-model=\"tmpPassword.oldPassword\"\n          />\n        </el-form-item>\n        <el-form-item label=\"新密码\" prop=\"newPassword\" required>\n          <el-input\n            type=\"password\"\n            prefix-icon=\"el-icon-edit\"\n            auto-complete=\"off\"\n            placeholder=\"请输入新密码\"\n            v-model=\"tmpPassword.newPassword\"\n          />\n        </el-form-item>\n        <el-form-item label=\"新密码\" prop=\"newPassword2\" required>\n          <el-input\n            type=\"password\"\n            prefix-icon=\"el-icon-edit\"\n            auto-complete=\"off\"\n            placeholder=\"请再次输入新密码\"\n            v-model=\"tmpPassword.newPassword2\"\n          />\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click.native.prevent=\"dialogFormVisible = false\">取消</el-button>\n        <el-button type=\"danger\" @click.native.prevent=\"$refs['tmpPassword'].resetFields()\">重置</el-button>\n        <el-button type=\"primary\" :loading=\"btnLoading\" @click.native.prevent=\"updatePassword\">更新</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport store from '@/store'\nimport { update as updateAccount, validatePassword } from '@/api/account'\nimport { unix2CurrentTime } from '@/utils'\nimport { isValidateEmail } from '@/utils/validate'\nimport { setToken } from '@/utils/token'\nimport { mapState } from 'vuex'\n\nexport default {\n  created() {\n    this.setDetail()\n  },\n  data() {\n    const validateOldPassword = (rule, value, callback) => {\n      if (value.length < 6) {\n        callback(new Error('密码长度必须在6或以上'))\n      }\n      // promise异步查询后端密码\n      this.validateOldPassword(value).then(isValidate => {\n        if (!isValidate) {\n          callback(new Error('旧密码不正确'))\n        } else {\n          callback()\n        }\n      })\n    }\n    const validateNewPassword = (rule, value, callback) => {\n      if (value.length < 6) {\n        callback(new Error('密码长度必须在6或以上'))\n      } else if (this.isOldNewPasswordSame()) {\n        callback(new Error('新旧密码不能一样'))\n      } else {\n        callback()\n      }\n    }\n    const validateNewPassword2 = (rule, value, callback) => {\n      if (value.length < 6) {\n        callback(new Error('密码长度必须在6或以上'))\n      } else if (!this.isNewPasswordSame()) {\n        callback(new Error('两次输入的密码不一致'))\n      } else {\n        callback()\n      }\n    }\n    const validateName = (rule, value, callback) => {\n      if (value.length < 3) {\n        callback(new Error('账户名长度必须在3或以上'))\n      } else {\n        callback()\n      }\n    }\n    const validateEmail = (rule, value, callback) => {\n      if (!isValidateEmail(value)) {\n        callback(new Error('邮箱格式错误'))\n      } else {\n        callback()\n      }\n    }\n    return {\n      loading: false,\n      btnLoading: false,\n      dialogFormVisible: false,\n      toUpdate: false,\n      tmpPassword: {\n        oldPassword: '',\n        newPassword: '',\n        newPassword2: ''\n      },\n      updatePasswordRules: {\n        oldPassword: [\n          { required: true, trigger: 'blur', validator: validateOldPassword }\n        ],\n        newPassword: [\n          { required: true, trigger: 'blur', validator: validateNewPassword }\n        ],\n        newPassword2: [\n          { required: true, trigger: 'blur', validator: validateNewPassword2 }\n        ]\n      },\n      tmpAccount: {\n        id: '',\n        name: '',\n        email: ''\n      },\n      updateDetailRules: {\n        name: [{ required: true, trigger: 'blur', validator: validateName }],\n        email: [{ required: true, trigger: 'blur', validator: validateEmail }]\n      }\n    }\n  },\n  computed: {\n    ...mapState({\n      account: state => state.account\n    })\n  },\n  methods: {\n    unix2CurrentTime,\n    /**\n     * 设置用户资料\n     */\n    setDetail() {\n      this.tmpAccount.name = this.account.name\n      this.tmpAccount.email = this.account.email\n    },\n    /**\n     * 验证旧密码\n     * @param oldPassword 旧密码\n     */\n    validateOldPassword(oldPassword) {\n      const account = {\n        id: this.account.accountId,\n        password: oldPassword\n      }\n      return validatePassword(account).then(response => response.data)\n    },\n    /**\n     * 新旧密码是否相同\n     */\n    isOldNewPasswordSame() {\n      return this.tmpPassword.oldPassword === this.tmpPassword.newPassword\n    },\n    /**\n     * 新密码1和2是否相同\n     */\n    isNewPasswordSame() {\n      return this.tmpPassword.newPassword === this.tmpPassword.newPassword2\n    },\n    /**\n     * 重置token\n     */\n    resetToken(token) {\n      setToken(token)\n      this.account.token = token\n    },\n    /**\n     * 重新获取用户信息\n     */\n    regainAccountDetail() {\n      this.loading = true\n      this.btnLoading = true\n      store.dispatch('Detail').then(() => {\n        this.loading = false\n        this.btnLoading = false\n      })\n    },\n    /**\n     * 更新用户\n     * @param account 用户\n     */\n    updateAccount(account) {\n      this.btnLoading = true\n      updateAccount(account).then(response => {\n        this.$message.success('更新成功')\n        this.resetToken(response.data)\n        this.regainAccountDetail()\n        this.btnLoading = false\n      }).catch(res => {\n        this.$message.error('更新失败')\n      })\n    },\n    /**\n     * 更新用户资料\n     */\n    updateDetail() {\n      this.$refs.tmpAccount.validate(valid => {\n        if (valid) {\n          this.tmpAccount.id = this.account.accountId\n          this.updateAccount(this.tmpAccount)\n        }\n      })\n    },\n    /**\n     * 显示更新密码对话框\n     */\n    showUpdatePasswordDialog() {\n      this.dialogFormVisible = true\n      this.tmpPassword.oldPassword = ''\n      this.tmpPassword.newPassword = ''\n      this.tmpPassword.newPassword2 = ''\n    },\n    /**\n     * 更新密码\n     */\n    updatePassword() {\n      this.$refs.tmpPassword.validate(valid => {\n        if (valid) {\n          const account = {}\n          account.id = this.account.accountId\n          account.password = this.tmpPassword.newPassword\n          this.updateAccount(account)\n          this.dialogFormVisible = false\n        }\n      })\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/views/system/account/detail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-form',{directives:[{name:\"loading\",rawName:\"v-loading.body\",value:(_vm.loading),expression:\"loading\",modifiers:{\"body\":true}}],ref:\"tmpAccount\",attrs:{\"model\":_vm.tmpAccount,\"rules\":_vm.updateDetailRules,\"label-width\":\"115px\"}},[_c('el-row',{attrs:{\"gutter\":18}},[_c('el-col',{attrs:{\"span\":9}},[_c('el-form-item',{attrs:{\"label\":\"账户名\",\"prop\":\"name\"}},[(_vm.toUpdate)?_c('el-input',{model:{value:(_vm.tmpAccount.name),callback:function ($$v) {_vm.$set(_vm.tmpAccount, \"name\", $$v)},expression:\"tmpAccount.name\"}}):_c('span',[_vm._v(_vm._s(_vm.tmpAccount.name))])],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":9}},[_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[(_vm.toUpdate)?_c('el-input',{model:{value:(_vm.tmpAccount.email),callback:function ($$v) {_vm.$set(_vm.tmpAccount, \"email\", $$v)},expression:\"tmpAccount.email\"}}):_c('span',[_vm._v(_vm._s(_vm.tmpAccount.email))])],1)],1)],1),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":18}},[_c('el-col',{attrs:{\"span\":9}},[_c('el-form-item',{attrs:{\"label\":\"注册时间\"}},[_c('span',[_vm._v(_vm._s(_vm.unix2CurrentTime(_vm.account.registerTime)))])])],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":9}},[_c('el-form-item',{attrs:{\"label\":\"最后登录时间\"}},[_c('span',[_vm._v(_vm._s(_vm.unix2CurrentTime(_vm.account.loginTime)))])])],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-row',{attrs:{\"gutter\":18}},[_c('el-col',{attrs:{\"span\":6}},[_c('el-button',{attrs:{\"type\":\"success\",\"loading\":_vm.btnLoading},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.regainAccountDetail($event)}}},[_vm._v(\"重新获取信息\")])],1),_vm._v(\" \"),(!_vm.toUpdate)?_c('el-col',{attrs:{\"span\":6}},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.toUpdate = !_vm.toUpdate}}},[_vm._v(\"修改信息\")])],1):_c('el-col',{attrs:{\"span\":6}},[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.updateDetail($event)}}},[_vm._v(\"确认修改\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"warning\"},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.toUpdate = !_vm.toUpdate}}},[_vm._v(\"取消修改\")])],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-button',{attrs:{\"type\":\"danger\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.showUpdatePasswordDialog($event)}}},[_vm._v(\"修改密码\")])],1)],1)],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"修改密码\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{ref:\"tmpPassword\",staticClass:\"small-space\",staticStyle:{\"width\":\"400px\",\"margin-left\":\"50px\"},attrs:{\"status-icon\":\"\",\"label-position\":\"left\",\"label-width\":\"115px\",\"model\":_vm.tmpPassword,\"rules\":_vm.updatePasswordRules}},[_c('el-form-item',{attrs:{\"label\":\"旧密码\",\"prop\":\"oldPassword\",\"required\":\"\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"prefix-icon\":\"el-icon-edit\",\"auto-complete\":\"off\",\"placeholder\":\"请输入旧密码\"},model:{value:(_vm.tmpPassword.oldPassword),callback:function ($$v) {_vm.$set(_vm.tmpPassword, \"oldPassword\", $$v)},expression:\"tmpPassword.oldPassword\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"newPassword\",\"required\":\"\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"prefix-icon\":\"el-icon-edit\",\"auto-complete\":\"off\",\"placeholder\":\"请输入新密码\"},model:{value:(_vm.tmpPassword.newPassword),callback:function ($$v) {_vm.$set(_vm.tmpPassword, \"newPassword\", $$v)},expression:\"tmpPassword.newPassword\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"新密码\",\"prop\":\"newPassword2\",\"required\":\"\"}},[_c('el-input',{attrs:{\"type\":\"password\",\"prefix-icon\":\"el-icon-edit\",\"auto-complete\":\"off\",\"placeholder\":\"请再次输入新密码\"},model:{value:(_vm.tmpPassword.newPassword2),callback:function ($$v) {_vm.$set(_vm.tmpPassword, \"newPassword2\", $$v)},expression:\"tmpPassword.newPassword2\"}})],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{nativeOn:{\"click\":function($event){$event.preventDefault();_vm.dialogFormVisible = false}}},[_vm._v(\"取消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"danger\"},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.$refs['tmpPassword'].resetFields()}}},[_vm._v(\"重置\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.btnLoading},nativeOn:{\"click\":function($event){$event.preventDefault();return _vm.updatePassword($event)}}},[_vm._v(\"更新\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-deca11c6\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/system/account/detail.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./detail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./detail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-deca11c6\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./detail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/system/account/detail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}